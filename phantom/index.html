<html>
  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
  <body>
    <script>
      let connection;
      let tokenMintAddress;
      let mainaddress;
      async function fetchTokenBalances() {
        // Ensure Phantom is available in the window object
        if (!('phantom' in window)) {
          window.open('https://phantom.app/', '_blank');
          return;
        }

        const provider = window.phantom?.solana;

        // Try to connect to Phantom
        try {
          const resp = await provider.connect();
          const walletPublicKey = resp.publicKey;
          console.log('Wallet Public Key:', walletPublicKey.toString());

          // Set up connection to Solana devnet
           connection = new solanaWeb3.Connection("https://api.devnet.solana.com");

          mainaddress=new solanaWeb3.PublicKey(walletPublicKey.toString());

          // Token Mint Address (replace with the actual mint address)
          tokenMintAddress = new solanaWeb3.PublicKey('4sp2EUDrQf46rZun6sYAWzjrXwUpx2T3njuoKmV766RJ');

       } catch (err) {
    // { code: 4001, message: 'User rejected the request.' }
}
(async () => {
  const publicKey = new solanaWeb3.PublicKey(
    "7cVfgArCheMR6Cs4t6vz5rfnqd56vZq4ndaBrY5xkxXy"
  );
  const solana = new solanaWeb3.Connection("https://docs-demo.solana-mainnet.quiknode.pro/");
  console.log(await solana.getAccountInfo(publicKey));
})();

async function getTokenBalanceWeb3(connection, tokenAccount) {
    const info = await connection.getTokenAccountBalance( mainaddress);
    if (info.value.uiAmount == null) throw new Error('No balance found');
    console.log('Balance (using Solana-Web3.js): ', info.value.uiAmount);
    return info.value.uiAmount;
}

getTokenBalanceWeb3(connection, tokenMintAddress).catch(err => console.log(err));

          

         
      }

      fetchTokenBalances();
    </script>
  </body>
</html>
